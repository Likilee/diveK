# yt-dlp 검토 메모 (2026-02-23)

## 결론
프론트엔드 우선 개발 단계에서는 `yt-dlp`를 도입하지 않습니다. 파이프라인 착수 시점에는 **`yt-dlp + 자막 후처리`를 백업 경로**로 두고, 기본 경로는 `youtube-transcript` 또는 YouTube API 기반 메타데이터 수집과 병행하는 전략이 적합합니다.

## 평가 기준
- `docs/data-pipeline.md`의 목표: 2~5초 자막 세그먼트 -> 15초/5초 슬라이딩 윈도우 -> 형태소 기반 키워드 추출
- 운영 관점: 재시도, 체크포인트 재개, 대량 배치 안정성
- 저작권/플랫폼 리스크: 접근 방식의 지속 가능성

## 장점 (`yt-dlp`)
- 영상별 자막/자동자막 다운로드 기능이 성숙함
- 로컬 CLI 자동화에 강함
- 메타데이터/자막 파싱을 한 프로세스로 묶기 쉬움

## 리스크 (`yt-dlp`)
- YouTube 변경에 따라 동작이 깨질 수 있어 유지보수 이벤트가 잦음
- 네트워크/지역/영상 설정에 따라 자막 가용성 편차가 큼
- 앱 단계에서 필요한 것은 검색 UX 검증인데, 초기에는 파이프라인 리스크가 개발 속도를 늦춤

## 권장 아키텍처 (파이프라인 시작 시)
1. 1차 수집 경로: API 또는 transcript 라이브러리
2. 실패/예외 경로: `yt-dlp` fallback
3. 공통 정규화 스키마: `{ offset, duration, text }`
4. 형태소 추출: 한국어 형태소 분석기 기반(결정사항 B), 불용어 리스트 외부 설정
5. 재처리 가능성: 체크포인트 + 원본 세그먼트 보존(JSONL)

## 구현 시 체크리스트
- `yt-dlp --write-auto-sub --sub-langs ko.* --skip-download` 형태의 최소 커맨드 검증
- 자막 포맷(vtt/json3)별 파서 통일
- 실패 시 backoff + checkpoint 저장
- 키워드 추출 단계는 pure function으로 분리해 테스트 가능하게 유지
